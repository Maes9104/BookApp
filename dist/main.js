(()=>{"use strict";const t="https://www.etnassoft.com/api/v1/get/?",e=async e=>{const n=e?`${t}${e}`:t;try{const t=await fetch(n);return await t.json()}catch(t){console.error("Fetch Error",t)}},n=async(t,n,a)=>{let s;return s=null!=t?await e(`category_id=${t}&results_range=${null!=a?a:0}&num_items=20`):null!=n?await e(`book_title="${n}"&results_range=${null!=a?a:0}&num_items=20`):await e(`category_id=677&results_range=${null!=a?a:0}&num_items=20`),sessionStorage.setItem("currentPage",null!=a?a:0),sessionStorage.setItem("category",null!=t?t:0),sessionStorage.setItem("bookName",null!=n?n:0),0===s.length?'\n\t\t\t<section class="Books">\n\t\t\t\t<h2>No se obtuvieron resultados :(</h2>\n\t\t\t</section>\n\t\t':`\n\t\t<section class="Books">\n\t\t\t${s.map((t=>`\n\t\t\t\t<article class="Book-item">\n\t\t\t\t\t<a href="#/${t.ID}/">\n\t\t\t\t\t\t<img src="${t.cover}" alt="${t.title}">\n\t\t\t\t\t\t<h2>${t.title}</h2>\n\t\t\t\t\t</a>\n\t\t\t\t</article>\n\t\t\t`)).join("")}\n\t\t</section>\n\t`},a=async()=>{let t=document.getElementById("selectCategory").value;document.getElementById("content").innerHTML=await n(t)},s=async()=>{let t=document.getElementById("search-input").value;t.length>3&&(document.getElementById("content").innerHTML=await n(null,t))},o=()=>location.hash.slice(1).toLocaleLowerCase().split("/")[1]||"/",i=t=>t.length<=5?"/"===t?t:"/:id":`/${t}`,l=async()=>{let t=parseInt(sessionStorage.getItem("currentPage"));0!==t?c(t-20):alert("Esta es la primer pÃ¡gina")},r=async()=>{let t=parseInt(sessionStorage.getItem("currentPage"));c(t+20)},c=async t=>{let e=sessionStorage.getItem("category"),a=sessionStorage.getItem("bookName");document.getElementById("content").innerHTML=await n("0"!==e?e:null,"0"!==a?a:null,t)},d=()=>'\n          <div class="Error404">\n              <h2>Error 404</h2>\n          </div>\n      ',u={"/":n,"/:id":async()=>{const t=o(),n=(await e(`id=${t}`))[0];return`\n\t\t<div class="Book-inner">\n\t\t\t<article class="Books-card">\n\t\t\t\t<img src="${n.cover}" alt="${n.title}">\n\t\t\t\t<h2>${n.title}</h2>\n\t\t\t\t<i class="like fa fa-heart-o fa-lg"></i>\n\t\t\t\t<i class="like fa fa-heart fa-lg" style="display:none"></i>\n\t\t\t</article>\n\t\t\t<article class="Books-about">\n\t\t\t\t<h3>Author: <span>${n.author}</span></h3>\n\t\t\t\t<h3>Language: <span>${n.language}</span></h3>\n\t\t\t\t<h3>Publisher: <span>${n.publisher}</span></h3>\n\t\t\t\t<h3>Pages: <span>${n.pages}</span></h3>\n\t\t\t\t<h3>Publish Date: <span>${n.publisher_date}</span></h3>\n\t\t\t\t<h3>Summary:</h3> <p>${n.content}</p>\n\t\t\t\t<h3>Categories: </h3> <ul>\n\t\t\t\t\t${n.categories.map((t=>`<li>${t.name}</li>`)).join("")}\n\t\t\t\t</ul>\n\t\t\t\t<h3>Tags: </h3> <ul>\n\t\t\t\t\t${n.tags.map((t=>`<li>${t.name}</li>`)).join("")}\n\t\t\t\t</ul>\n\t\t\t</article>\n\t\t</div>\n\t`},"/favs":"Contact"},g=async()=>{const t=document.getElementById("header"),n=document.getElementById("content");t.innerHTML=await'\n    <section class="Header-main">\n        <div class="Header-logo">\n            <h1>\n                <a href="/">\n                    Book App\n                </a>\n            </h1>\n        </div>\n        <div class="Header-nav">\n            <a href="#/favs/">Favoritos</a>\n        </div>\n    </section>\n    ',await(async()=>{const t=await e("get_categories=all"),n=document.getElementById("searchBar"),o=`\n        <article class="Books-search">\n            <input type="text" placeholder="Busca tu libro favorito" name="search" id="search-input" />\n            <i class="fa fa-search searchIcon"></i>\n        </article>\n        <select class="Categories" id="selectCategory">\n            ${t.map((t=>`\n                <option value="${t.category_id}"> ${t.name}</option>\n            `)).join("")}\n        </select>\n    `;n.innerHTML=o,document.getElementById("selectCategory").addEventListener("change",a),document.getElementById("search-input").addEventListener("keyup",s)})();let c=o(),g=await i(c),h=u[g]?u[g]:d;n.innerHTML=await h(),await(async()=>{const t=document.getElementById("pager");t.innerHTML='\n        <section class="Books-pager">\n            <button id="preview"><a>Preview</a></button>\n            <button id="next"><a>Next</a></button>\n        </section>';let e=o(),n=await i(e);t.style.display="/"!==n?"none":"block";let a=document.getElementById("preview"),s=document.getElementById("next");a.addEventListener("click",l),s.addEventListener("click",r)})()};window.addEventListener("load",g),window.addEventListener("hashchange",g)})();